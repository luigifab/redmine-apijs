/*!
 * Copyright 2008-2018 | Fabrice Creuzot (luigifab) <code~luigifab~fr>
 * https://www.luigifab.fr/redmine/apijs - 5.3.1
 * This program is free software, you can redistribute it or modify
 * it under the terms of the GNU General Public License (GPL).
 */
function apijsInitTranslations(){var e=apijs.i18n.data.de,a=apijs.i18n.data.en,i=apijs.i18n.data.es,t=apijs.i18n.data.fr,r=apijs.i18n.data.it,n=apijs.i18n.data.pt,o=apijs.i18n.data.ru;e.a250="Eine Datei löschen",a.a250="Delete a file",i.a250="Borrar un archivo",t.a250="Supprimer un fichier",r.a250="Eliminare un file",n.a250="Suprimir um ficheiro",o.a250="Удалить файл",e.a251="Sind Sie sicher, dass Sie diese Datei löschen möchten?[br]Achtung, diese Aktion ist unrückgängig.",a.a251="Are you sure you want to delete this file?[br]Be careful, you can't cancel this operation.",i.a251="¿Está usted seguro-a de que desea eliminar este archivo?[br]Atención, pues no podrá cancelar esta operación.",t.a251="Êtes-vous certain(e) de vouloir supprimer ce fichier ?[br]Attention, cette opération n'est pas annulable.",r.a251="Sicuri di voler eliminare il file?[br]Attenzione, questa operazione non puo' essere annullata.",n.a251="Tem certeza de que quer suprimir este ficheiro?[br]Atenção, não pode cancelar esta operação.",o.a251="Вы уверены, что хотите удалить этот файл?[br]Осторожно, вы не сможете отменить эту операцию.",e.a252="Fehler",a.a252="Error",i.a252="Error",t.a252="Erreur",r.a252="Errore",n.a252="Erro",o.a252="Ошибка",e.a253="Sie verfügen nicht über die notwendigen Rechte um diese Operation durchzuführen, bitte [a §]aktualisieren Sie die Seite[/a].",a.a253="You are not authorized to perform this operation, please [a §]refresh the page[/a].",i.a253="No está autorizado-a para llevar a cabo esta operación, por favor [a §]actualice la página[/a].",t.a253="Vous n'êtes pas autorisé(e) à effectuer cette opération, veuillez [a §]actualiser la page[/a].",r.a253="Non siete autorizzati a eseguire questa operazione, vi preghiamo di [a §]ricaricare la pagina[/a].",n.a253="Não é autorizado(a) para efetuar esta operação, por favor [a §]atualize a página[/a].",o.a253="Вы не авторизованы для выполнения этой операции, пожалуйста [a §]обновите страницу[/a].",e.a254="Es tut uns leid, diese Datei existiert nicht mehr, bitte [a §]aktualisieren Sie die Seite[/a].",a.a254="Sorry, the file no longer exists, please [a §]refresh the page[/a].",i.a254="Lo sentimos, pero el archivo ya no existe, por favor [a §]actualice la página[/a].",t.a254="Désolé, le fichier n'existe plus, veuillez [a §]actualiser la page[/a].",r.a254="Spiacenti, il file non esiste più, vi preghiamo di [a §]ricaricare la pagina[/a].",n.a254="Lamento, o ficheiro já não existe, por favor [a §]atualize a página[/a].",o.a254="Извините, но файл не существует, пожалуйста [a §]обновите страницу[/a].",e.a255="Eine Beschreibung bearbeiten",a.a255="Edit a description",i.a255="Editar una descripción",t.a255="Modifier une description",r.a255="Modificare una descrizione",n.a255="Modificar uma descrição",o.a255="Редактировать описание",e.a256="Bitte geben Sie weiter unten die neue Beschreibung für diese Datei an. Um die Beschreibung zu löschen lassen Sie das Feld leer.",a.a256="Enter below the new description for the file. To remove the description, leave the field empty.",i.a256="Introduzca a continuación la nueva descripción para el archivo. Para eliminar la descripción, deje el campo en blanco.",t.a256="Saisissez ci-dessous la nouvelle description pour ce fichier. Pour supprimer la description, laissez le champ vide.",r.a256="Inserire qui sotto la nuova descrizione del file. Per cancellare la descrizione, lasciate lo spazio vuoto.",n.a256="Digite abaixo a nova descrição para este ficheiro. Para suprimir a descrição, deixe o campo vazio.",o.a256="Ниже введите новое описание файла. Оставьте поле пустым, чтобы удалить описание."}function apijsShowError(e){"number"==typeof e||e.indexOf("<!DOCTYPE")<0?apijs.dialog.dialogInformation(apijs.i18n.translate("a252"),"number"==typeof e?apijs.i18n.translate("error"+e,"href='javascript:location.reload();'"):e,"error"):(apijs.dialog.styles.remove("lock"),location.reload())}function apijsEditAttachment(e,a,i){var t,r;"string"!=typeof apijs.i18n.data.en.a255&&apijsInitTranslations(),r=document.getElementById("attachmentId"+e).querySelector("span.description")?document.getElementById("attachmentId"+e).querySelector("span.description").firstChild.nodeValue.trim():((r=document.createElement("span")).setAttribute("class","description"),r.appendChild(document.createTextNode("")),document.getElementById("attachmentId"+e).querySelector("dd").appendChild(r),""),t='[p][label for="apijsRedText"]'+apijs.i18n.translate("a257")+"[/label][/p]",t+='[input type="text" name="description" value="'+r+'" spellcheck="true" id="apijsRedText"]',apijs.dialog.dialogFormOptions(apijs.i18n.translate("a256"),t,a,apijsActionEditAttachment,[a,e,i],"editattachment"),apijs.dialog.t1.querySelector("input").select()}function apijsActionEditAttachment(e,a){if("boolean"==typeof e)return!0;var t;"string"==typeof e&&((t=new XMLHttpRequest).open("POST",a[0]+"?id="+a[1]+"&isAjax=true",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.setRequestHeader("X-CSRF-Token",a[2]),t.onreadystatechange=function(){var e,a,i;4===t.readyState&&200===t.status?0===t.responseText.indexOf("attachmentId")?(e=t.responseText.slice(0,t.responseText.indexOf(":")),a=t.responseText.slice(t.responseText.indexOf(":")+1),(i=document.getElementById(e).querySelector("span.description").firstChild).replaceData(0,i.length,a),(i=document.getElementById(e).querySelector("input"))&&(i.value=i.value.slice(0,i.value.lastIndexOf("|")+1)+a),(i=document.getElementById(e).querySelector("img"))&&i.setAttribute("alt",a),apijs.dialog.actionClose()):apijsShowError(t.responseText):4===t.readyState&&403===t.status?apijsShowError(403):4===t.readyState&&404===t.status&&apijsShowError(404)},t.send("description="+encodeURIComponent(document.getElementById("apijsRedText").value)))}function apijsDeleteAttachment(e,a,i){"string"!=typeof apijs.i18n.data.en.a250&&apijsInitTranslations(),apijs.dialog.dialogConfirmation(apijs.i18n.translate("a250"),apijs.i18n.translate("a251"),apijsActionDeleteAttachment,[a,e,i])}function apijsActionDeleteAttachment(e){var o=new XMLHttpRequest;o.open("GET",e[0]+"?id="+e[1]+"&isAjax=true",!0),o.setRequestHeader("X-CSRF-Token",e[2]),o.onreadystatechange=function(){if(4===o.readyState&&200===o.status)if(0===o.responseText.indexOf("attachmentId")){var e,a,i,t=document.getElementById(o.responseText),r=t.parentNode,n=0;if(r.removeChild(t),e=r.querySelectorAll("a[id][type]"),r.querySelectorAll("dl,li").length<1)r.style.display="none";else if(0<e.length)for(a in e)e.hasOwnProperty(a)&&!isNaN(a)&&(i=e[a].getAttribute("id"),e[a].setAttribute("id",i.slice(0,i.lastIndexOf(".")+1)+n++));apijs.dialog.actionClose()}else apijsShowError(o.responseText);else 4===o.readyState&&403===o.status?apijsShowError(403):4===o.readyState&&404===o.status&&apijsShowError(404)},o.send()}