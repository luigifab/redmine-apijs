/*!
 * Copyright 2008-2017 | Fabrice Creuzot (luigifab) <code~luigifab~fr>
 * https://www.luigifab.fr/redmine/apijs - 5.3.0
 * This program is free software, you can redistribute it or modify
 * it under the terms of the GNU General Public License (GPL).
 */
function apijsInitTranslations(){var e=apijs.i18n.data.de,i=apijs.i18n.data.en,t=apijs.i18n.data.es,a=apijs.i18n.data.fr,r=apijs.i18n.data.it,n=apijs.i18n.data.pt,o=apijs.i18n.data.ru;e.deleteTitle="Eine Datei löschen",i.deleteTitle="Delete a file",t.deleteTitle="Borrar un archivo",a.deleteTitle="Supprimer un fichier",r.deleteTitle="Eliminare un file",n.deleteTitle="Suprimir um ficheiro",o.deleteTitle="Удалить файл",e.deleteText="Sind Sie sicher, dass Sie diese Datei löschen möchten?[br]Achtung, diese Aktion ist unrückgängig.",i.deleteText="Are you sure you want to delete this file?[br]Be careful, you can't cancel this operation.",t.deleteText="¿Está usted seguro-a de que desea eliminar este archivo?[br]Atención, pues no podrá cancelar esta operación.",a.deleteText="Êtes-vous certain(e) de vouloir supprimer ce fichier ?[br]Attention, cette opération n'est pas annulable.",r.deleteText="Sicuri di voler eliminare il file?[br]Attenzione, questa operazione non puo' essere annullata.",n.deleteText="Tem certeza de que quer suprimir este ficheiro?[br]Atenção, não pode cancelar esta operação.",o.deleteText="Вы уверены, что хотите удалить этот файл?[br]Осторожно, вы не сможете отменить эту операцию.",e.errorTitle="Fehler",i.errorTitle="Error",t.errorTitle="Error",a.errorTitle="Erreur",r.errorTitle="Errore",n.errorTitle="Erro",o.errorTitle="Ошибка",e.error403="Sie verfügen nicht über die notwendigen Rechte um diese Operation durchzuführen, bitte [a §]aktualisieren Sie die Seite[/a].",i.error403="You are not authorized to perform this operation, please [a §]refresh the page[/a].",t.error403="No está autorizado-a para llevar a cabo esta operación, por favor [a §]actualice la página[/a].",a.error403="Vous n'êtes pas autorisé(e) à effectuer cette opération, veuillez [a §]actualiser la page[/a].",r.error403="Non siete autorizzati a eseguire questa operazione, vi preghiamo di [a §]ricaricare la pagina[/a].",n.error403="Não é autorizado(a) para efetuar esta operação, por favor [a §]atualize a página[/a].",o.error403="Вы не авторизованы для выполнения этой операции, пожалуйста [a §]обновите страницу[/a].",e.error404="Es tut uns leid, diese Datei existiert nicht mehr, bitte [a §]aktualisieren Sie die Seite[/a].",i.error404="Sorry, the file no longer exists, please [a §]refresh the page[/a].",t.error404="Lo sentimos, pero el archivo ya no existe, por favor [a §]actualice la página[/a].",a.error404="Désolé, le fichier n'existe plus, veuillez [a §]actualiser la page[/a].",r.error404="Spiacenti, il file non esiste più, vi preghiamo di [a §]ricaricare la pagina[/a].",n.error404="Lamento, o ficheiro já não existe, por favor [a §]atualize a página[/a].",o.error404="Извините, но файл не существует, пожалуйста [a §]обновите страницу[/a].",e.sendTitle="Mehrere Dateien versenden",i.sendTitle="Send multiple files",t.sendTitle="Enviar varios archivos",a.sendTitle="Envoyer plusieurs fichiers",r.sendTitle="Inviare più file",n.sendTitle="Enviar vários ficheiros",o.sendTitle="Отправить несколько файлов",e.sendText="§ Dateien gespeichert. Beenden Sie Ihre Veränderungen bevor Sie das Formular speichern oder die Seite [a §]neu laden[/a].",i.sendText="§ files saved. Finish your changes before saving the form or simply [a §]reload[/a] the page.",t.sendText="§ archivos grabados. Termine sus modificaciones antes de grabar el formulario o [a §]recargue[/a] simplemente la página.",a.sendText="§ fichiers enregistrés. Terminez vos modifications avant d'enregistrer le formulaire ou [a §]rechargez[/a] simplement la page.",r.sendText="§ file salvati. Terminate le vostre modifiche prima di salvare il formulario o [a §]ricaricate[/a] semplicemente la pagina.",n.sendText="§ ficheiros registados. Termine as suas alterações antes de registar o formulário ou [a §]recarregue[/a] simplesmente a página.",o.sendText="§ файлы сохранены. Завершите изменения перед тем как сохранить форму или просто [a §]перезагрузите[/a] страницу.",e.editTitle="Eine Beschreibung bearbeiten",i.editTitle="Edit a description",t.editTitle="Editar una descripción",a.editTitle="Modifier une description",r.editTitle="Modificare una descrizione",n.editTitle="Modificar uma descrição",o.editTitle="Редактировать описание",e.editText="Bitte geben Sie weiter unten die neue Beschreibung für diese Datei an. Um die Beschreibung zu löschen lassen Sie das Feld leer.",i.editText="Enter below the new description for the file. To remove the description, leave the field empty.",t.editText="Introduzca a continuación la nueva descripción para el archivo. Para eliminar la descripción, deje el campo en blanco.",a.editText="Saisissez ci-dessous la nouvelle description pour ce fichier. Pour supprimer la description, laissez le champ vide.",r.editText="Inserire qui sotto la nuova descrizione del file. Per cancellare la descrizione, lasciate lo spazio vuoto.",n.editText="Digite abaixo a nova descrição para este ficheiro. Para suprimir a descrição, deixe o campo vazio.",o.editText="Ниже введите новое описание файла. Оставьте поле пустым, чтобы удалить описание."}function apijsShowError(e){"number"==typeof e||e.indexOf("<!DOCTYPE")<0?apijs.dialog.dialogInformation(apijs.i18n.translate("errorTitle"),"number"==typeof e?apijs.i18n.translate("error"+e,"href='javascript:location.reload();'"):e,"error"):(apijs.dialog.styles.remove("lock"),location.reload())}function apijsSendZip(e,i,t){"string"!=typeof apijs.i18n.data.en.sendTitle&&apijsInitTranslations(),apijs.config.upload.tokenValue=i,apijs.upload.sendFile(apijs.i18n.translate("sendTitle"),e,"mybigzip",t,"zip",apijsFinalZip)}function apijsFinalZip(e){apijs.dialog.dialogInformation(apijs.i18n.translate("sendTitle"),apijs.i18n.translate("sendText",e,"href='javascript:location.reload();'"))}function apijsEditAttachment(e,i,t){var a,r;"string"!=typeof apijs.i18n.data.en.editTitle&&apijsInitTranslations(),r=document.getElementById("attachmentId"+e).querySelector("span.description")?document.getElementById("attachmentId"+e).querySelector("span.description").firstChild.nodeValue.trim():((r=document.createElement("span")).setAttribute("class","description"),r.appendChild(document.createTextNode("")),document.getElementById("attachmentId"+e).querySelector("dd").appendChild(r),""),a='[p][label for="apijsRedText"]'+apijs.i18n.translate("editText")+"[/label][/p]",a+='[input type="text" name="description" value="'+r+'" spellcheck="true" id="apijsRedText"]',apijs.dialog.dialogFormOptions(apijs.i18n.translate("editTitle"),a,i,apijsActionEditAttachment,[i,e,t],"editattachment"),apijs.dialog.tDialog.querySelector("input").select()}function apijsActionEditAttachment(e,i){if("boolean"==typeof e)return!0;var a;"string"==typeof e&&((a=new XMLHttpRequest).open("POST",i[0]+"?id="+i[1]+"&isAjax=true",!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.setRequestHeader("X-CSRF-Token",i[2]),a.onreadystatechange=function(){var e,i,t;4===a.readyState&&200===a.status?0===a.responseText.indexOf("attachmentId")?(e=a.responseText.slice(0,a.responseText.indexOf(":")),i=a.responseText.slice(a.responseText.indexOf(":")+1),(t=document.getElementById(e).querySelector("span.description").firstChild).replaceData(0,t.length,i),(t=document.getElementById(e).querySelector("input"))&&(t.value=t.value.slice(0,t.value.lastIndexOf("|")+1)+i),(t=document.getElementById(e).querySelector("img"))&&t.setAttribute("alt",i),apijs.dialog.actionClose()):apijsShowError(a.responseText):4===a.readyState&&403===a.status?apijsShowError(403):4===a.readyState&&404===a.status&&apijsShowError(404)},a.send("description="+encodeURIComponent(document.getElementById("apijsRedText").value)))}function apijsDeleteAttachment(e,i,t){"string"!=typeof apijs.i18n.data.en.deleteTitle&&apijsInitTranslations(),apijs.dialog.dialogConfirmation(apijs.i18n.translate("deleteTitle"),apijs.i18n.translate("deleteText"),apijsActionDeleteAttachment,[i,e,t])}function apijsActionDeleteAttachment(e){var o=new XMLHttpRequest;o.open("GET",e[0]+"?id="+e[1]+"&isAjax=true",!0),o.setRequestHeader("X-CSRF-Token",e[2]),o.onreadystatechange=function(){if(4===o.readyState&&200===o.status)if(0===o.responseText.indexOf("attachmentId")){var e,i,t,a=document.getElementById(o.responseText),r=a.parentNode,n=0;if(r.removeChild(a),e=r.querySelectorAll("a[id][type]"),r.querySelectorAll("dl,li").length<1)r.style.display="none";else if(0<e.length)for(i in e)e.hasOwnProperty(i)&&!isNaN(i)&&(t=e[i].getAttribute("id"),e[i].setAttribute("id",t.slice(0,t.lastIndexOf(".")+1)+n++));apijs.dialog.actionClose()}else apijsShowError(o.responseText);else 4===o.readyState&&403===o.status?apijsShowError(403):4===o.readyState&&404===o.status&&apijsShowError(404)},o.send()}